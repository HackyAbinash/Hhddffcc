var b$=b$||{};b$.universal=b$.universal||{},b$.universal.widgets=b$.universal.widgets||{},b$.universal.widgets.StructuredContentHeroCarousel=function(v){"use strict";require(["features/%5BBBHOST%5D/feature-hdfc-download-pdf/scripts/video"],function(h){define("hero-carousel",function(n,e,t){v(document).ready(function(){v(".be-hero-buttons").on("click",function(){if(!b$.portal.isGapDisabled()&&!b$.portal.isLogin){var e=v("ul.slick-dots").find("li.slick-active").index(),t=v(this).parent(".be-ex-carousel-content").find(".be-ex-sub-title").text(),r=v(".be-ex-hero-carousel.slick-slide.slick-current.slick-active").find(".btn.btn-md").text(),n=document.referrer,a=window.location.href,o=v(".header-menu .navbar-collapse ul.navbar-nav > li.active").text(),i=b$.portal.typeOfDevice();dataLayer.push({bannerposition:e,bannername:t,buttonselection:r,referral:n,userID:"null","Page path":a,deviceType:i,userType:"null",event:"bannertracking","Page Section":o})}})});t.exports={herocarousel:function(p,e,r){v.ajax({url:e,success:function(u){var f,e=u;v("head").append('<link rel="stylesheet" href="'+r+'/static/features/%5BBBHOST%5D/feature-hdfc-slick-slider/css/slick.css" type="text/css">'),n(["features/%5BBBHOST%5D/feature-hdfc-slick-slider/scripts/slick"],function(){v(".hero-carousel-container").not(".slick-initialized").slick({infinite:!0,dots:!0,speed:500,arrows:!0,slidesToShow:1,slidesToScroll:1,autoplay:!0,autoplaySpeed:u.transitionSpeed,responsive:[{breakpoint:959,arrows:!1,settings:{arrows:!1}},{breakpoint:768,arrows:!1,settings:{arrows:!1}},{breakpoint:767,arrows:!1,mobileFirst:!0,variableWidth:!1,settings:{arrows:!1}},{breakpoint:540,arrows:!1,variableWidth:!1,settings:{arrows:!1}},{breakpoint:480,arrows:!1,settings:{arrows:!1}}]})});for(var t=0;t<e.carouselContent.length;t++)e.carouselContent[t]&&(v(window).width()<768&&null!=e.carouselContent[t].ImageMob?(v(".be-ex-hero-carousel .be-ex-banner .desk-banner").eq(t).css({display:"none"}),v(".be-ex-hero-carousel .be-ex-banner .mob-banner").eq(t).css({display:"block"}),v(".be-ex-hero-carousel .be-ex-banner .tab-banner").eq(t).css({display:"none"})):767<v(window).width()&&v(window).width()<960&&null!=e.carouselContent[t].ImageTab?(v(".be-ex-hero-carousel .be-ex-banner .desk-banner").eq(t).css({display:"none"}),v(".be-ex-hero-carousel .be-ex-banner .mob-banner").eq(t).css({display:"none"}),v(".be-ex-hero-carousel .be-ex-banner .tab-banner").eq(t).css({display:"block"})):(v(".be-ex-hero-carousel .be-ex-banner .desk-banner").eq(t).css({display:"block"}),v(".be-ex-hero-carousel .be-ex-banner .mob-banner").eq(t).css({display:"none"}),v(".be-ex-hero-carousel .be-ex-banner .tab-banner").eq(t).css({display:"none"})));v(document).ready(function(){1==u.pbHome&&3<u.carouselContent.length&&v(p.htmlNode).find(".hero-carousel-container").addClass("pb-dots")}),v(p.htmlNode).find(".be-ex-hero-carousel").on("click",function(e){var t;f=v(this);var r=v(this).find(".be-ex-banner a").attr("title"),n=f.index();if(0<v(".desk-banner").height())if(null==(a=v(this).find(".be-ex-banner img").attr("alt")))a="";else var a=v(this).find(".be-ex-banner img").attr("alt");if(0<v(".mob-banner").height())if(null==(a=v(this).find(".be-ex-banner .mob-banner img").attr("alt")))a="";else var a=v(this).find(".be-ex-banner .mob-banner img").attr("alt");0<v(".tab-banner").height()&&(a=null==(a=v(this).find(".be-ex-banner .tab-banner img").attr("alt"))?"":v(this).find(".be-ex-banner .tab-banner img").attr("alt")),t=v(this).find(".be-ex-banner a").attr("href");var o=a,i=r,s=a+" : "+n;h.trackLink(o,t,i,s);var l=f.index()-1;v(p.htmlNode).find(".video-player").empty();var d=v(p.htmlNode).find(".video-player");if(l<u.carouselContent.length){var c=u.carouselContent[l].videoLink;if(1==h.checkURL(c)){e.preventDefault();var b=h.convertURL(c);h.createVideo(p,b,d),h.playVideo(p),h.track()}}}),v(p.htmlNode).find(".close-button-video").on("click",function(){h.closeVideo(p)})},error:function(e){}})}}})}),v(window).resize("resize",function(){var e=v(".be-ex-article").closest(".bp-widget");320==v(window).width()||480==v(window).width()||540==v(window).width()?v(e[3]).insertBefore(v(e[1])):768!=v(window).width()&&960!=v(window).width()||v(e[3]).insertBefore(v(e[4]))});var p="cs";return{prefModified:function(e){e.refreshIncludes();var t=v(e.htmlNode);v(".bd-structured-content-widget",t).attr("data-type",e.getPreference("contentType")||"Content")},start:function(i){var n,e=i.getPreference("contentRef"),a=v(i.htmlNode),t=!1;try{top.bd}catch(e){t=!0}for(var r,o=!(!window.be||t)&&be.utils.module("top.bd.PageMgmtTree.selectedLink").isMasterPage||"true"===i.model.manageable||""===i.model.manageable||void 0===i.model.manageable,s=[],l=0;l<i.model.preferences.array.length;l++)"templateUrl"==i.model.preferences.array[l].name&&(r=i.model.preferences.array[l].value);var d=i.getPreference("urlContent"),c=b$.portal.portalModel.serverURL,b=c+"/static/widgets/%5BBBHOST%5D/widget-hdfc-portal-hero-carousel/media/pop-close.png";if(v(".close-button-url").attr("src",b),null!=d){var u=d.indexOf("content"),f=d.slice(u,d.length);d=c+"/"+f}null==r&&null==r||(s=r.split("/")),o&&(e||a.addClass("bd-empty-structured-content"),v(".bd-structured-content-widget",a).attr("data-type",i.getPreference("contentType")||"Content"),i.addEventListener("preferences-form",function(e){for(var t=b$.portal.portalModel.filterPreferences(i.model.preferences.array),r=t.length-1;0<=r;r--)if("Template"==t[r].label)for(var n=i.getPreference("templateList").split(","),a=0,o=0;a<n.length;a++,o++)t[r].inputType.options[o]={label:n[a],value:n[a+1]},a++}),i.addEventListener("bdDrop.enter",function(e){var t=e.detail.info.helper.bdDragData.fileDataArray[0];t.metaData&&t.metaData["cmis:objectTypeId"]&&"bb:structuredcontent"===t.metaData["cmis:objectTypeId"].property?(n=t,a.addClass("bd-over-structured-content")):n=void 0}),i.addEventListener("bdDrop.leave",function(e){a.removeClass("bd-over-structured-content")}),i.addEventListener("bdDrop.drop",function(e){var t=e.detail.info.helper.bdDragData.fileDataArray[0];if(n){if(!i.model.preferences.getByName("contentRef")){var r=b$.portal.portalModel.createPreference("contentRef","contentRef",void 0,"");i.model.preferences.add(r)}i.setPreference("urlContent",t.url),i.setPreference("contentRef",[p,"contentRepository"===n.repository?n.repository:"@portalRepository",n.contentUId].join(":")),i.model.save(function(){i.refreshHTML(),a.removeClass("bd-empty-structured-content")}),a.removeClass("bd-over-structured-content")}n=void 0}),window.bd&&window.bd.bindDropEvents&&window.bd.bindDropEvents(i.htmlNode),"hero-carousel.html"==s[s.length-1]&&require(["hero-carousel"],function(e){e.herocarousel(i,d,c)}),"hero-carousel-link-only.html"==s[s.length-1]&&require(["hero-carousel"],function(e){e.herocarousel(i,d,c)}))}}}(jQuery);