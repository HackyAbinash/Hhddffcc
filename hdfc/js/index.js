var b$=b$||{};b$.universal=b$.universal||{},b$.universal.widgets=b$.universal.widgets||{},b$.universal.widgets.lifestageWidget=function(v){"use strict";require(["features/%5BBBHOST%5D/feature-hdfc-download-pdf/scripts/video"],function(m){define("home-overlay-links",function(e,t,i){i.exports={homeOverlayone:function(e,h,u,p,t){v(".homeOverlayLinks .overlay-links ul li a img").each(function(){0<this.src.length?v(this).addClass("list-icon"):v(this).hide()}),v(h.htmlNode).find(".homeOverlayLinks .overlay-links ul li").on("click",function(e){var t=v(this).children("li a").text();(-1<t.indexOf("chat")||-1<t.indexOf("Chat"))&&(e.preventDefault(),toggleEvaChat())}),v.ajax({url:e,success:function(e){var i,n,r,o,s=e,d=s.list,f=0,t=v(h.htmlNode).parents(".right-side-scroll-fix").css("transform");v(h.htmlNode).find(".overlay-links ul li a").on("click",function(e){c=v(h.htmlNode).find(".life-parent .sectionTitle").text().trim(),v(".breadcrumb.hdfc-portal-breadcrum").css("z-index","0"),e.preventDefault();var t=v(this).text();if(t.indexOf("chat")<0&&t.indexOf("Chat")<0){var i="";if(0<=(f=s.SplittedMenu.leftMenuUrl?v(this).parent("li").index()-1:v(this).parent("li").index())){null!=d[f].url&&(i=d[f].url);var n=b+d[f].loginUrl,r=d[f].listName,o=d[f].overlayDescription}if(0==p&&0<=f)if(1==d[f].isLoginRequired&&0==p)v(".c-template-hdfc-middle-section .large-side-scroll-fix").css("z-index","0"),v(h.htmlNode).parents(".right-side-scroll-fix").css("transform",""),v(h.htmlNode).find(".popup-heading").text(r),v(h.htmlNode).find(".popup-description").text(o),v(h.htmlNode).find(".know-more").attr("href",b+i),v(h.htmlNode).find(".nb-login").attr("href",b+"/login?redirect="+b+d[f].loginUrl),v(h.htmlNode).find(".nb-login").attr("value","decision"),"SME popup"==d[f].overlayTypeSME&&(v(h.htmlNode).find(".nb-login").attr("value",""),v(h.htmlNode).find(".nb-login").on("click",function(e){e.preventDefault(),gadgets.pubsub.publish("otherLogin","sme")})),v(h.htmlNode).find(".cover").css("display","block"),v("body").addClass("stop-scroll"),v(".bp-manageableArea").css("z-index","99999"),v(".middle-menu-bar").css("z-index","0"),v(h.htmlNode).find(".popup-container").addClass("opened"),null!=d[f].KnowMoreButtonName?v(h.htmlNode).find(".know-more").text(d[f].KnowMoreButtonName):v(h.htmlNode).find(".know-more").text("Know More"),null!=d[f].loginButtonName?v(h.htmlNode).find(".nb-login").text(d[f].loginButtonName):v(h.htmlNode).find(".nb-login").text("Login");else if(-1<i.toString().indexOf(".pdf"))window.open(u+"/content/bbp/repositories/723fb80a-2dde-42a3-9793-7ae1be57c87f/?path="+i,"_blank");else if(-1<i.indexOf("http")){v(h.htmlNode).find(".video-player").empty();var a=v(h.htmlNode).find(".video-player");if("ext-link"==v(this).attr("value"))event.preventDefault();else if("ext-link-video"==v(this).attr("value")||"ext-link-nb-video"==v(this).attr("value")){var l=m.convertURL(i);m.createVideo(h,l,a),m.playVideo(h),m.track(c)}else g.portal.navigateTo(i)}else 0<=f&&(null==d[f].url&&1==d[f].overlayRequired?(event.preventDefault(),v(this).attr("href","#")):g.portal.navigateTo(b+i));else-1<i.indexOf("http")?(v(h.htmlNode).find(".video-player").empty(),a=v(h.htmlNode).find(".video-player"),"ext-link-video"==v(this).attr("value")||"ext-link-nb-video"==v(this).attr("value")?(l=m.convertURL(i),m.createVideo(h,l,a),m.playVideo(h),m.track(c)):g.portal.navigateTo(i)):f<0?g.portal.navigateTo(v(this)[0].pathname):g.portal.navigateTo(n)}v(h.htmlNode).find(".close-button-video").on("click",function(){m.closeVideo(h,c)})}),v(".close-button, .nb-login").on("click",function(){v(".bp-manageableArea").css("z-index",""),v(".middle-menu-bar").css("z-index","99999"),v(h.htmlNode).parents(".right-side-scroll-fix").css("transform",t),v(h.htmlNode).find(".cover").css("display","none"),v("body").removeClass("stop-scroll"),v(h.htmlNode).find(".popup-container").removeClass("opened"),v(".breadcrumb.hdfc-portal-breadcrum").css("z-index","9")});var c=v().find(".sectionTitle").text();v(h.htmlNode).find(".life-parent .homeOverlayLinks .overlay-links .splitted .left-menu").on("click",function(e){i=v(this).text().trim(),r=c,n=v(this).find("a").attr("href"),m.trackLink(i,n,r,o)}),v(h.htmlNode).find(".life-parent .homeOverlayLinks .overlay-links .splitted .right-menu").on("click",function(e){i=v(this).text().trim();var t=v(this).text().trim();r=c+" : "+t,n=v(this).find("a").attr("href"),m.trackLink(i,n,r,o)}),v(h.htmlNode).find(".life-parent .homeOverlayLinks .overlay-links .link").on("click",function(e){i=v(this).text().trim();var t=v(this).text().trim();r=c+" : "+t,n=v(this).attr("href"),m.trackLink(i,n,r,o)}),v(h.htmlNode).find(".viewAll a").on("click",function(e){i=v(this).text().trim(),c=v(this).parent().parent().parent().parent().find(".sectionTitle").text().trim(),n=v(this).attr("href"),r=c,m.trackLink(i,n,r,o)}),v(h.htmlNode).find(".overlay-links .view-all a").attr("href","javascript:void(0)")},error:function(e){}})}}}),define("offers-for-you",function(e,t,i){i.exports={offersForYou:function(e,o,t,i,n){var r,a,l,s;v(o.htmlNode).find(".offersSubParent,.offers-imp").on("click",function(e){d=v(o.htmlNode).find(".life-parent .sectionTitle").text().trim();var t=v(this).find(".offersLink").attr("href"),i=v(this).find(".offersLink").attr("value");v(o.htmlNode).find(".video-player").empty();var n=v(o.htmlNode).find(".video-player");if("ext-link-video"==i||"ext-link-nb-video"==i){e.preventDefault();var r=m.convertURL(t);m.createVideo(o,r,n),m.playVideo(o),m.track(d)}});var d=v(this).find(".sectionTitle").text().trim();v(o.htmlNode).find(".sectionTitle a").on("click",function(e){r=d=v(this).text().trim(),l=d,a=v(this).attr("href"),m.trackLink(r,a,l,s)}),v(o.htmlNode).find(".offersSubParent").on("click",function(e){r=v(this).find(".offersBanner img").attr("alt");var t=v(this).find(".offersHeading").text().trim(),i=v(this).find(".offersSubheading").text().trim(),n=d+" :"+t+" :"+i;a=v(this).find(".offersBanner a").attr("href"),m.trackLink(r,a,n,s)}),v(o.htmlNode).find(".viewAll a").on("click",function(e){r=v(this).text().trim(),d=v(this).parent().parent().parent().parent().find(".sectionTitle").text().trim(),l=d,a=v(this).attr("href"),m.trackLink(r,a,l,s)}),v(o.htmlNode).find(".close-button-video").on("click",function(){m.closeVideo(o,d)})}}}),define("lifestage",function(e,t,i){i.exports={lifestage:function(r,e,t){var n,o,a,l;v(".adbannersParent").on("click",function(){s=v(r.htmlNode).find(".life-parent .sectionTitle").text().trim();var e=v(this).find(".adLink").attr("href"),t=v(this).find(".adLink").attr("value");v(r.htmlNode).find(".video-player").empty();var i=v(r.htmlNode).find(".video-player");if("ext-link-video"==t||"ext-link-nb-video"==t){event.preventDefault();var n=m.convertURL(e);m.createVideo(r,n,i),m.playVideo(r),m.track(s)}}),v(r.htmlNode).find(".close-button-video").on("click",function(){m.closeVideo(r,s)});var s=v(r.htmlNode).find(".sectionTitle").text().trim();v(r.htmlNode).find(".sectionTitle a").on("click",function(e){n=s=v(this).text().trim(),a=s,o=v(this).attr("href"),m.trackLink(n,o,a,l)}),v(r.htmlNode).find(".adbannersParent").on("click",function(e){n=v(this).find(".heading").text().trim();var t=v(this).find(".heading").text().trim(),i=v(this).find(".subheading").text().trim();a=s+" :"+t+" :"+i,o=v(this).find(".adbanner a").attr("href"),m.trackLink(n,o,a,l)}),v(r.htmlNode).find(".viewAll").on("click",function(e){n=v(this).text().trim(),o=v(this).find("a").attr("href");var t=s;m.trackLink(n,o,t,l)})}}}),define("gap",function(e,t,i){v(".lifestageContainer .lifestageParent .superParent .adbannersParent").on("click",function(){if(!g.portal.isGapDisabled()&&!g.portal.isLogin){var e=v(this).children(".heading").text(),t=document.referrer,i=window.location.href,n=v(".header-menu .navbar-collapse .normal-main-header li.active a").text(),r=g.portal.typeOfDevice();dataLayer.push({articlename:e,referral:t,"page path":i,"Page section":n,userID:"null",deviceType:r,userType:"null",event:"Lifestage Solutions"})}})}),define("utils",["features/%5BBBHOST%5D/feature-hdfc-slick-slider/scripts/slick"],function(e,t,i){v(".adbannersParent").on("click",function(){var e=v(this).find(".adLink").attr("href"),t=v(this).find(".adLink").attr("value");"ext-link-video"!=t&&"ext-link-nb-video"!=t&&g.portal.navigateTo(e)}),v(".lifestage-slider .regular").slick({dots:!1,infinite:!1,adaptiveHeight:!0,arrows:!1,responsive:[{breakpoint:768,settings:{slidesToShow:1.5,slidesToScroll:1}},{breakpoint:541,settings:{slidesToShow:1.3,slidesToScroll:1}},{breakpoint:481,settings:{slidesToShow:1.2,slidesToScroll:1}},{breakpoint:321,settings:{slidesToShow:1.1,slidesToScroll:1}}]}),v(".offersSubParent,.offers-imp").on("click",function(){var e=v(this).find(".offersLink").attr("href");g.portal.navigateTo(e)}),v(".life-parent .trustedSuperParent").eq(1).css("padding-top","0px"),v(".life-parent .trustedSuperParent").eq(1).css("border-bottom","1px solid #dedede"),v(".lifestageParent .offersSuperParent").eq(1).find(".offersParent").css("border-bottom","none"),v(".lifestageParent .offersSuperParent").eq(1).css("border-bottom","1px solid #dedede"),v(".offers-slider .regular").slick({dots:!1,infinite:!1,arrows:!1,adaptiveHeight:!0,responsive:[{breakpoint:768,settings:{slidesToShow:1.5,slidesToScroll:1}},{breakpoint:540,settings:{slidesToShow:1.3,slidesToScroll:1}},{breakpoint:480,settings:{slidesToShow:1.2,slidesToScroll:1}},{breakpoint:320,settings:{slidesToShow:1.1,slidesToScroll:1}}]})}),define("trustedChoice",function(e,t,i){i.exports={trustedChoice:function(e,t){var i,n,r,o,a=v(".life-parent .sectionTitle a").text();v(".life-parent .sectionTitle a").on("click",function(){r=v(this).text(),o=v(this).attr("href"),i=a,m.trackLink(r,o,i,n)}),v(".life-parent .offersContainer .lifestageParent .trustedSuperParent .offersParent .offersSubParent .trusted-offersBanner img").on("click",function(){r=v(this).attr("alt"),o=v(v(this).parent().parent()).find("a").attr("href"),i=a,m.trackLink(r,o,i,n)}),v(".life-parent .offersContainer .lifestageParent .trustedSuperParent .offersParent .offersSubParent .trusted-offersHeading").on("click",function(){r=v(this).text(),o=v(this).attr("href"),i=a+"::",m.trackLink(r,o,i,n)}),v(".life-parent .offersContainer .lifestageParent .viewAll a").on("click",function(){r=v(this).text(),o=v(this).attr("href"),v(v(this).parent().parent()).find(".trustedSuperParent .offersParent .offersSubParent .trusted-offersHeading").text().trim(),i=a,m.trackLink(r,o,i,n)})}}})}),v(document).ready(function(){var i=[];v(".Identify").each(function(e,t){i.push(v(t).text().trim())});for(var e=i.filter(function(e,t,i){return t==i.indexOf(e)}),t=0;t<e.length;t++);v(".sub-content").each(function(e,t){0==e?v(this).css("display","block"):v(this).css("display","none")}),v(".allMilesTabs li:first-child").addClass("active"),v(".allMilesTabs li").on("click",function(){var i=v(this).index();v(".allMilesTabs").find(".active").removeClass("active"),v(".allMilesTabs li").eq(i).addClass("active"),v(".sub-content").each(function(e,t){e==i?v(this).css("display","block"):v(this).css("display","none")})}),v(".arrow-icon").addClass("glyphicon-menu-down"),v(".hideForLarge").on("click",function(){v(this).next().slideToggle(),v(this).find(".arrow-icon").hasClass("glyphicon-menu-up")?(v(this).find(".arrow-icon").removeClass("glyphicon-menu-up"),v(this).find(".arrow-icon").addClass("glyphicon-menu-down")):v(this).find(".arrow-icon").hasClass("glyphicon-menu-down")&&(v(this).find(".arrow-icon").removeClass("glyphicon-menu-down"),v(this).find(".arrow-icon").addClass("glyphicon-menu-up"))})});var u,p="cs",g=window.b$||{},m=g.portal.portalName;u=""!=g.portal.loggedInUserId&&null!=g.portal.loggedInUserId||""!=g.portal.loggedInUserRole&&null!=g.portal.loggedInUserRole,m=g.portal.portalName;var b=g.portal.urlRedirect;return{prefModified:function(e){e.refreshIncludes();var t=v(e.htmlNode);v(".bd-structured-content-widget",t).attr("data-type",e.getPreference("contentType")||"Content")},start:function(a){for(var e,t=[],i=0;i<a.model.preferences.array.length;i++)"templateUrl"==a.model.preferences.array[i].name&&(e=a.model.preferences.array[i].value);var n=a.getPreference("urlContent"),r=g.portal.portalModel.serverURL,o=r+"/static/widgets/%5BBBHOST%5D/widget-hdfc-lifestage-solutions/media/pop-close.png";if(v(".close-button-url").attr("src",o),null!=n){var l=n.indexOf("content"),s=n.slice(l,n.length);n=r+"/"+s}null==e&&null==e||(t=e.split("/"));var d,f=a.getPreference("contentRef"),c=v(a.htmlNode),h=!1;try{top.bd}catch(e){h=!0}(!(!window.be||h)&&be.utils.module("top.bd.PageMgmtTree.selectedLink").isMasterPage||"true"===a.model.manageable||""===a.model.manageable||void 0===a.model.manageable)&&(f||c.addClass("bd-empty-structured-content"),v(".bd-structured-content-widget",c).attr("data-type",a.getPreference("contentType")||"Content"),a.addEventListener("preferences-form",function(e){for(var t=g.portal.portalModel.filterPreferences(a.model.preferences.array),i=t.length-1;0<=i;i--)if("Template"==t[i].label)for(var n=a.getPreference("templateList").split(","),r=0,o=0;r<n.length;r++,o++)t[i].inputType.options[o]={label:n[r],value:n[r+1]},r++}),a.addEventListener("bdDrop.enter",function(e){var t=e.detail.info.helper.bdDragData.fileDataArray[0];t.metaData&&t.metaData["cmis:objectTypeId"]&&"bb:structuredcontent"===t.metaData["cmis:objectTypeId"].property?(d=t,c.addClass("bd-over-structured-content")):d=void 0}),a.addEventListener("bdDrop.leave",function(e){c.removeClass("bd-over-structured-content")}),a.addEventListener("bdDrop.drop",function(e){var t=e.detail.info.helper.bdDragData.fileDataArray[0];if(d){if(!a.model.preferences.getByName("contentRef")){var i=g.portal.portalModel.createPreference("contentRef","contentRef",void 0,"");a.model.preferences.add(i)}a.setPreference("urlContent",t.url),a.setPreference("contentRef",[p,"contentRepository"===d.repository?d.repository:"@portalRepository",d.contentUId].join(":")),a.model.save(function(){a.refreshHTML(),c.removeClass("bd-empty-structured-content")}),c.removeClass("bd-over-structured-content")}d=void 0}),window.bd&&window.bd.bindDropEvents&&window.bd.bindDropEvents(a.htmlNode),"home-overlay-links.html"==t[t.length-1]&&require(["home-overlay-links"],function(e){e.homeOverlayone(n,a,r,u,m)}),"home-offers-for-you.html"==t[t.length-1]&&require(["offers-for-you"],function(e){e.offersForYou(n,a,r,u,m)}),"lifestage.html"==t[t.length-1]&&require(["lifestage"],function(e){e.lifestage(a,r,n)}),"trusted-choice.html"==t[t.length-1]&&require(["trustedChoice"],function(e){e.trustedChoice(a,websiteDomain,n)}),require(["gap"]),require(["utils"]))}}}(jQuery);